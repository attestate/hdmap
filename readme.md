# hdmap

> Hdmap as in Harberger dmap

```
 dmap.sol
┌────────────────────────────────────────────────┐
│                                                │
│ keys              meta              data       │
│                                                │
│ 0x000...00  ───►  0xabc...00  ───►  0xcafecafe │
│ 0x000...01                                     │
│ ...                                            │
│ 0x111...11  ───►  0x00000001  ───►  0xf0rd0000 │
│                                                │
└────────────────────────────────────────────────┘

   ┌───┐
   │   │  ┌───┐             Depreciating licenses
   │   │  │   │  ┌───┐
   │   │  │   │  │   │  ┌───┐
   │   │  │   │  │   │  │   │  ┌───┐
 ──┴───┴──┴───┴──┴───┴──┴───┴──┴───┴──────────────

    #1  ─► #2  ─► #3  ─► #4  ─► #5

 ─────────────────────────────────────────────────

  Process:

  1. Register a name space identifier for your
     organization: e.g. "maker".

  2. A `SimpleNameZone` is deployed when you call
     `assess(bytes32("maker"))`. SALSA-rules apply!

  3. Stow some keys (and lock them) e.g.
     "maker:dai"

  4. Make sure you continously self-assess your
     namezone's property value! It's "partial
     common ownership" and can be bought by
     others!
```

## description

- Hdmap implements a Harberger tax as deprecating licenses for a
  [dmap](https://github.com/dapphub/dmap)
  [zonefab](https://github.com/dmfxyz/zonefab).
- An sub-namezone owner can permanently or temporarly lock key value pairs.
  But write-access is permanently auctioned via [depreciating
  licenses](https://anthonyleezhang.github.io/pdfs/dl.pdf).
- The tax is calculated on a per-block basis.
- The tax rate is 1/31556952 per year. The denominator (31556952) is seconds
  in a year. Practically, it means that a self-assessed key worth 1 ether will
  accumulate a tax obligation of 1 ether/year.
- Whenever a sub-namezone is transferred via `function give(...)`, the
  `recipient` assumes the tax obligation.
- All captured Harberger taxes are sent to Ethereum miners. Hdmap is an
  "Ethereum upgrade" and, hence, different from the many "protocols" issuing
  their own tokens or implementing egoistical rent-seeking.

## why would anyone want to own this?

Harberger tax pricing or "partial common ownership" has some serious downsides
compared to traditional private property. A Harberger property is technically
**always on sale** to the highest bidder, and so when we're talking about
building a domain name system: who would want their top-level .com domain to be
robbed from a degen or whale? It's like getting up for a leak only to find your
chair at the bar now taken by Chad!

But unfortunately, private property also has pretty significant problems which
aren't widely recognized. Did you know that ALL 4 LETTER .com domains have been
taken since 2013? Yes, that includes 23iu.com, a combination I generated by
just slapping my keyboard spontaneously!

The problem is the externalities that private property's possessional effect
has on its price. By law - anyone stealing privately held property is going to
jail, and this protection is socialized through the state's taxes and police.
For property residing in (conceptually) geographic locations where an owner
isn't fully in control of their property's value, e.g., in an inner city or
when we buy a .com domain: holding may be more profitable than developing.

We guess it's a cousin of Metcalfe's law, stating that the network's value is
proportional to the square of its users [2]: While simultaneously saying that
hence if you can own parts of the network under private property law: You'd be
dumb to sell or improve as your property's value is a product of everybody
else's membership! So free-riding is where profits are.

For a .com domain, or an apartment in Manhattan, this means the following:
Unintuitively, as an owner of such property, you're not in control of its value - the others are!

After all, your apartment will only appreciate significantly in value if there
happen to spawn some hip third-wave coffee shops next door and someone decides
to host edgy neighborhood parties regularly. Your apartment and your .com
domain are then valued based on the attractiveness of their surroundings (the
network) and not your actions.

And while that's great for everyone owning such properties: It's bad for
everybody else, particularly price!

As a compact .com domain or Manhattan apartment owner: What are your incentives
to sell or develop now? After all: motivated and well-paid youngsters are
moving into your area - you'd be stupid to sell given that continued private
property ownership isn't costing.

Hence, that's why we see an ever increase in rent extraction in inner cities
and generally in any domain that allows for monopolizing a (conceptual)
geography.

It makes it all the more surprising why the freshly launched Ethereum Name
System opted to re-implement private property laws - when domain squatting is
such an obvious and annoying problem within the DNS.

And so here's why holding a hdmap key under Harberger tax pricing for a limited
amount of time can make sense:

- It's cheap, and possessors will optimize prices because the skewed private
  property pricing doesn't apply.
- It allows continued innovation for those that are willing to pay the tax: Not
  those that have developed a niche skill for squatting and trolling others.
- It's an entirely new way of dealing with property that hasn't been endgamed,
  so there's still a bunch of gotchas to be discovered.

Have fun!

1. https://whoapi.com/blog/we-are-out-of-4-letter-com-domains/
2. https://en.wikipedia.org/w/index.php?title=Metcalfe%27s_law&oldid=1081198390

## tests

always run foundry as a mainnet fork using the `-f` option

```shell
foundry test -f <json rpc endpoint url>
```
